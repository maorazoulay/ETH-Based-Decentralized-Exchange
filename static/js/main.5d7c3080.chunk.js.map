{"version":3,"sources":["helpers.js","store/selectors.js","components/navbar.js","store/actions.js","store/interactions.js","components/Spinner.js","components/OrderBook.js","components/Trades.js","components/MyTransactions.js","components/PriceChart.config.js","components/PriceChart.js","components/Balance.js","components/NewOrder.js","components/Content.js","components/App.js","store/reducers.js","store/configureStore.js","serviceWorker.js","index.js"],"names":["ETHER_ADDRESS","GREEN","RED","DECIMALS","ether","wei","tokens","formatBalance","balance","Math","round","account","state","get","accountSelector","createSelector","a","web3Selector","w","tokenLoaded","tokenSelector","tl","t","exchangeLoaded","exchangeSelector","el","e","contractsLoadedSelector","cancelledOrdersLoaded","cancelledOrders","loaded","filledOrdersLoaded","o","filledOrdersLoadedSelector","filledOrders","filledOrdersSelector","orders","sort","b","timestamp","decorateFilledOrders","previousOrder","map","order","decorateOrder","decorateFilledOrder","etherAmount","tokenAmount","tokenGive","amountGive","amountGet","tokenPrice","formattedTimestamp","moment","unix","format","tokenPriceClass","id","orderId","openOrders","all","allOrders","filled","cancelled","reject","orderFilled","some","orderCancelled","orderBookLoaded","allOrdersLoaded","orderBookLoadedSelector","orderBookSelector","decorateOrderBookOrders","groupBy","buyOrders","sellOrders","decorateOrderBookOrder","orderType","orderTypeClass","orderFillAction","myFilledOrdersLoadedSelector","myFilledOrdersSelector","filter","user","userFill","decorateMyFilledOrders","decorateMyFilledOrder","orderSign","myOpenOrdersLoadedSelector","myOpenOrdersSelector","decorateMyOpenOrders","decorateMyOpenOrder","priceChartLoadedSelector","priceChartSelector","secondLastOrder","lastOrder","slice","length","lastPrice","lastPriceChange","series","data","buildGraphData","startOf","Object","keys","hour","group","open","high","maxBy","low","minBy","close","x","Date","y","orderCancellingSelector","status","orderFillingSelector","balancesLoadingSelector","etherBalanceSelector","tokenBalanceSelector","exchangeEtherBalanceSelector","exchangeTokenBalanceSelector","etherDepositAmountSelector","amount","etherWithdrawAmountSelector","tokenDepositAmountSelector","tokenWithdrawAmountSelector","buyOrderSelector","sellOrderSelector","Navbar","className","href","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","this","props","target","rel","Component","connect","web3AccountLoaded","tokenBalanceLoaded","exchangeEtherBalanceLoaded","exchangeTokenBalanceLoaded","loadWeb3","dispatch","window","ethereum","web3","Web3","connection","alert","location","assign","loadAccount","eth","getAccounts","accounts","loadToken","networkId","token","Contract","Token","abi","networks","address","contract","console","log","loadExchange","exchange","Exchange","loadAllOrders","getPastEvents","fromBlock","toBlock","cancelStream","event","returnValues","tradeStream","orderStream","subscribeToEvents","events","Cancel","error","Trade","Deposit","Withdraw","Order","loadBalances","getBalance","etherBalance","methods","balanceOf","call","tokenBalance","exchangeEtherBalance","options","exchangeTokenBalance","renderOrder","OverlayTrigger","key","placement","overlay","Tooltip","onClick","fillOrder","send","from","on","hash","OrderBook","showOrderBook","orderBook","Spinner","orderFilling","Trades","showMyOpenOrders","myOpenOrders","cancelOrder","MyTransactions","Tabs","defaultActiveKey","Tab","eventKey","title","showMyFilledOrders","myFilledOrders","myOpenOrdersLoaded","orderCancelling","chartOptions","chart","animations","enabled","toolbar","show","width","tooltip","theme","style","fontSize","fontFamily","undefined","formatter","marker","items","display","fixed","position","offsetX","offsetY","xaxis","labels","colors","cssClass","yaxis","minWidth","maxWidth","color","rotate","showPriceChart","priceChart","height","PriceChart","priceChartLoaded","showForm","etherDepositAmount","tokenDepositAmount","etherWithdrawAmount","tokenWithdrawAmount","onSubmit","preventDefault","depositEther","value","utils","toWei","placeholder","onChange","required","approve","depositToken","withdrawEther","withdrawToken","Balance","loadBlockchainData","balancesLoading","buyOrder","sellOrder","showBuyTotal","showSellTotal","tokenGet","price","toString","makeOrder","makeBuyOrder","makeSellOrder","NewOrder","making","Content","App","net","getId","contractsLoaded","rootReducer","combineReducers","action","findIndex","loggerMiddleware","createLogger","middleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","preloadedState","Boolean","hostname","match","ReactDOM","render","store","createStore","applyMiddleware","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.5d7c3080.chunk.js","sourcesContent":["export const ETHER_ADDRESS = '0x0000000000000000000000000000000000000000'\r\nexport const GREEN = 'success'\r\nexport const RED = 'danger'\r\n\r\nexport const DECIMALS = (10**18)\r\n\r\n// Shortcut to avoid passing around web3 connection\r\nexport const ether = (wei) => {\r\n  if(wei) {\r\n    return(wei / DECIMALS) // 18 decimal places\r\n  }\r\n}\r\n\r\n// Tokens and ether havesame decimal resolution\r\nexport const tokens = ether\r\n\r\n export const formatBalance = (balance) => {\r\n  const precision = 100 // 2 decimal places\r\n\r\n  balance = ether(balance)\r\n  balance = Math.round(balance * precision) / precision // Use 2 decimal places\r\n\r\n  return balance\r\n}","import { get, groupBy, reject, maxBy, minBy } from 'lodash'\r\nimport { createSelector } from 'reselect'\r\nimport moment from 'moment'\r\nimport { ETHER_ADDRESS, GREEN, RED, ether, tokens } from '../helpers'\r\n\r\n// TODO: Move me to helpers file\r\nexport const formatBalance = (balance) => {\r\n  const precision = 100 // 2 decimal places\r\n\r\n  balance = ether(balance)\r\n  balance = Math.round(balance * precision) / precision // Use 2 decimal places\r\n\r\n  return balance\r\n}\r\n\r\nconst account = state => get(state, 'web3.account')\r\nexport const accountSelector = createSelector(account, a => a)\r\n\r\nconst web3 = state => get(state, 'web3.connection')\r\nexport const web3Selector = createSelector(web3, w => w)\r\n\r\nconst tokenLoaded = state => get(state, 'token.loaded', false)\r\nexport const tokenLoadedSelector = createSelector(tokenLoaded, tl => tl)\r\n\r\nconst token = state => get(state, 'token.contract')\r\nexport const tokenSelector = createSelector(token, t => t)\r\n\r\nconst exchangeLoaded = state => get(state, 'exchange.loaded', false)\r\nexport const exchangeLoadedSelector = createSelector(exchangeLoaded, el => el)\r\n\r\nconst exchange = state => get(state, 'exchange.contract')\r\nexport const exchangeSelector = createSelector(exchange, e => e)\r\n\r\nexport const contractsLoadedSelector = createSelector(\r\n  tokenLoaded,\r\n  exchangeLoaded,\r\n  (tl, el) => (tl && el)\r\n)\r\n\r\n// All Orders\r\nconst allOrdersLoaded = state => get(state, 'exchange.allOrders.loaded', false)\r\nconst allOrders = state => get(state, 'exchange.allOrders.data', [])\r\n\r\n// Cancelled orders\r\nconst cancelledOrdersLoaded = state => get(state, 'exchange.cancelledOrders.loaded', false)\r\nexport const cancelledOrdersLoadedSelector = createSelector(cancelledOrdersLoaded, loaded => loaded)\r\n\r\nconst cancelledOrders = state => get(state, 'exchange.cancelledOrders.data', [])\r\nexport const cancelledOrdersSelector = createSelector(cancelledOrders, o => o)\r\n\r\n// Filled Orders\r\nconst filledOrdersLoaded = state => get(state, 'exchange.filledOrders.loaded', false)\r\nexport const filledOrdersLoadedSelector = createSelector(filledOrdersLoaded, loaded => loaded)\r\n\r\nconst filledOrders = state => get(state, 'exchange.filledOrders.data', [])\r\nexport const filledOrdersSelector = createSelector(\r\n  filledOrders,\r\n  (orders) => {\r\n    // Sort orders by date ascending for price comparison\r\n    orders = orders.sort((a,b) => a.timestamp - b.timestamp)\r\n    // Decorate the orders\r\n    orders = decorateFilledOrders(orders)\r\n    // Sort orders by date descending for display\r\n    orders = orders.sort((a,b) => b.timestamp - a.timestamp)\r\n    return orders\r\n  }\r\n)\r\n\r\nconst decorateFilledOrders = (orders) => {\r\n  // Track previous order to compare history\r\n  let previousOrder = orders[0]\r\n  return(\r\n    orders.map((order) => {\r\n      order = decorateOrder(order)\r\n      order = decorateFilledOrder(order, previousOrder)\r\n      previousOrder = order // Update the previous order once it's decorated\r\n      return order\r\n    })\r\n  )\r\n}\r\n\r\nconst decorateOrder = (order) => {\r\n  let etherAmount\r\n  let tokenAmount\r\n\r\n  if(order.tokenGive === ETHER_ADDRESS) {\r\n    etherAmount = order.amountGive\r\n    tokenAmount = order.amountGet\r\n  } else {\r\n    etherAmount = order.amountGet\r\n    tokenAmount = order.amountGive\r\n  }\r\n\r\n  // Calculate token price to 5 decimal places\r\n  const precision = 100000\r\n  let tokenPrice = (etherAmount / tokenAmount)\r\n  tokenPrice = Math.round(tokenPrice * precision) / precision\r\n\r\n  return({\r\n    ...order,\r\n    etherAmount: ether(etherAmount),\r\n    tokenAmount: tokens(tokenAmount),\r\n    tokenPrice,\r\n    formattedTimestamp: moment.unix(order.timestamp).format('h:mm:ss a M/D')\r\n  })\r\n}\r\n\r\nconst decorateFilledOrder = (order, previousOrder) => {\r\n  return({\r\n    ...order,\r\n    tokenPriceClass: tokenPriceClass(order.tokenPrice, order.id, previousOrder)\r\n  })\r\n}\r\n\r\nconst tokenPriceClass = (tokenPrice, orderId, previousOrder) => {\r\n  // Show green price if only one order exists\r\n  if(previousOrder.id === orderId) {\r\n    return GREEN\r\n  }\r\n\r\n  // Show green price if order price higher than previous order\r\n  // Show red price if order price lower than previous order\r\n  if(previousOrder.tokenPrice <= tokenPrice) {\r\n    return GREEN // success\r\n  } else {\r\n    return RED // danger\r\n  }\r\n}\r\n\r\nconst openOrders = state => {\r\n  const all = allOrders(state)\r\n  const filled = filledOrders(state)\r\n  const cancelled = cancelledOrders(state)\r\n\r\n  const openOrders = reject(all, (order) => {\r\n    const orderFilled = filled.some((o) => o.id === order.id)\r\n    const orderCancelled = cancelled.some((o) => o.id === order.id)\r\n    return(orderFilled || orderCancelled)\r\n  })\r\n\r\n  return openOrders\r\n}\r\n\r\n\r\nconst orderBookLoaded = state => cancelledOrdersLoaded(state) && filledOrdersLoaded(state) && allOrdersLoaded(state)\r\nexport const orderBookLoadedSelector = createSelector(orderBookLoaded, loaded => loaded)\r\n\r\n// Create the order book\r\nexport const orderBookSelector = createSelector(\r\n  openOrders,\r\n  (orders) => {\r\n    // Decorate orders\r\n    orders = decorateOrderBookOrders(orders)\r\n    // Group orders by \"orderType\"\r\n    orders = groupBy(orders, 'orderType')\r\n    // Fetch buy orders\r\n    const buyOrders = get(orders, 'buy', [])\r\n    // Sort buy orders by token price\r\n    orders = {\r\n      ...orders,\r\n      buyOrders: buyOrders.sort((a,b) => b.tokenPrice - a.tokenPrice)\r\n    }\r\n    // Fetch sell orders\r\n    const sellOrders = get(orders, 'sell', [])\r\n    // Sort sell orders by token price\r\n    orders = {\r\n      ...orders,\r\n      sellOrders: sellOrders.sort((a,b) => b.tokenPrice - a.tokenPrice)\r\n    }\r\n    return orders\r\n  }\r\n)\r\n\r\nconst decorateOrderBookOrders = (orders) => {\r\n  return(\r\n    orders.map((order) => {\r\n      order = decorateOrder(order)\r\n      order = decorateOrderBookOrder(order)\r\n      return(order)\r\n    })\r\n  )\r\n}\r\n\r\nconst decorateOrderBookOrder = (order) => {\r\n  const orderType = order.tokenGive === ETHER_ADDRESS ? 'buy' : 'sell'\r\n  return({\r\n    ...order,\r\n    orderType,\r\n    orderTypeClass: (orderType === 'buy' ? GREEN : RED),\r\n    orderFillAction: orderType === 'buy' ? 'sell' : 'buy'\r\n  })\r\n}\r\n\r\nexport const myFilledOrdersLoadedSelector = createSelector(filledOrdersLoaded, loaded => loaded)\r\n\r\nexport const myFilledOrdersSelector = createSelector(\r\n  account,\r\n  filledOrders,\r\n  (account, orders) => {\r\n    // Find our orders\r\n    orders = orders.filter((o) => o.user === account || o.userFill === account)\r\n    // Sort by date ascending\r\n    orders = orders.sort((a,b) => a.timestamp - b.timestamp)\r\n    // Decorate orders - add display attributes\r\n    orders = decorateMyFilledOrders(orders, account)\r\n    return orders\r\n  }\r\n)\r\n\r\nconst decorateMyFilledOrders = (orders, account) => {\r\n  return(\r\n    orders.map((order) => {\r\n      order = decorateOrder(order)\r\n      order = decorateMyFilledOrder(order, account)\r\n      return(order)\r\n    })\r\n  )\r\n}\r\n\r\nconst decorateMyFilledOrder = (order, account) => {\r\n  const myOrder = order.user === account\r\n\r\n  let orderType\r\n  if(myOrder) {\r\n    orderType = order.tokenGive === ETHER_ADDRESS ? 'buy' : 'sell'\r\n  } else {\r\n    orderType = order.tokenGive === ETHER_ADDRESS ? 'sell' : 'buy'\r\n  }\r\n\r\n  return({\r\n    ...order,\r\n    orderType,\r\n    orderTypeClass: (orderType === 'buy' ? GREEN : RED),\r\n    orderSign: (orderType === 'buy' ? '+' : '-')\r\n  })\r\n}\r\n\r\nexport const myOpenOrdersLoadedSelector = createSelector(orderBookLoaded, loaded => loaded)\r\n\r\nexport const myOpenOrdersSelector = createSelector(\r\n  account,\r\n  openOrders,\r\n  (account, orders) => {\r\n    // Filter orders created by current account\r\n    orders = orders.filter((o) => o.user === account)\r\n    // Decorate orders - add display attributes\r\n    orders = decorateMyOpenOrders(orders)\r\n    // Sort orders by date descending\r\n    orders = orders.sort((a,b) => b.timestamp - a.timestamp)\r\n    return orders\r\n  }\r\n)\r\n\r\nconst decorateMyOpenOrders = (orders, account) => {\r\n  return(\r\n    orders.map((order) => {\r\n      order = decorateOrder(order)\r\n      order = decorateMyOpenOrder(order, account)\r\n      return(order)\r\n    })\r\n  )\r\n}\r\n\r\nconst decorateMyOpenOrder = (order, account) => {\r\n  let orderType = order.tokenGive === ETHER_ADDRESS ? 'buy' : 'sell'\r\n\r\n  return({\r\n    ...order,\r\n    orderType,\r\n    orderTypeClass: (orderType === 'buy' ? GREEN : RED)\r\n  })\r\n}\r\n\r\nexport const priceChartLoadedSelector = createSelector(filledOrdersLoaded, loaded => loaded)\r\n\r\nexport const priceChartSelector = createSelector(\r\n  filledOrders,\r\n  (orders) => {\r\n    // Sort orders by date ascending to compare history\r\n    orders = orders.sort((a,b) => a.timestamp - b.timestamp)\r\n    // Decorate orders - add display attributes\r\n    orders = orders.map((o) => decorateOrder(o))\r\n    // Get last 2 order for final price & price change\r\n    let secondLastOrder, lastOrder\r\n    [secondLastOrder, lastOrder] = orders.slice(orders.length - 2, orders.length)\r\n    // get last order price\r\n    const lastPrice = get(lastOrder, 'tokenPrice', 0)\r\n    // get second last order price\r\n    const secondLastPrice = get(secondLastOrder, 'tokenPrice', 0)\r\n\r\n    return({\r\n      lastPrice,\r\n      lastPriceChange: (lastPrice >= secondLastPrice ? '+' : '-'),\r\n      series: [{\r\n        data: buildGraphData(orders)\r\n      }]\r\n    })\r\n  }\r\n)\r\n\r\nconst buildGraphData = (orders) => {\r\n  // Group the orders by hour for the graph\r\n  orders = groupBy(orders, (o) => moment.unix(o.timestamp).startOf('hour').format())\r\n  // Get each hour where data exists\r\n  const hours = Object.keys(orders)\r\n  // Build the graph series\r\n  const graphData = hours.map((hour) => {\r\n    // Fetch all the orders from current hour\r\n    const group = orders[hour]\r\n    // Calculate price values - open, high, low, close\r\n    const open = group[0] // first order\r\n    const high = maxBy(group, 'tokenPrice') // high price\r\n    const low = minBy(group, 'tokenPrice') // low price\r\n    const close = group[group.length - 1] // last order\r\n\r\n    return({\r\n      x: new Date(hour),\r\n      y: [open.tokenPrice, high.tokenPrice, low.tokenPrice, close.tokenPrice]\r\n    })\r\n  })\r\n\r\n  return graphData\r\n}\r\n\r\nconst orderCancelling = state => get(state, 'exchange.orderCancelling', false)\r\nexport const orderCancellingSelector = createSelector(orderCancelling, status => status)\r\n\r\nconst orderFilling = state => get(state, 'exchange.orderFilling', false)\r\nexport const orderFillingSelector = createSelector(orderFilling, status => status)\r\n\r\n// BALANCES\r\nconst balancesLoading = state => get(state, 'exchange.balancesLoading', true)\r\nexport const balancesLoadingSelector = createSelector(balancesLoading, status => status)\r\n\r\nconst etherBalance = state => get(state, 'web3.balance', 0)\r\nexport const etherBalanceSelector = createSelector(\r\n  etherBalance,\r\n  (balance) => {\r\n    return formatBalance(balance)\r\n  }\r\n)\r\n\r\nconst tokenBalance = state => get(state, 'token.balance', 0)\r\nexport const tokenBalanceSelector = createSelector(\r\n  tokenBalance,\r\n  (balance) => {\r\n    return formatBalance(balance)\r\n  }\r\n)\r\n\r\nconst exchangeEtherBalance = state => get(state, 'exchange.etherBalance', 0)\r\nexport const exchangeEtherBalanceSelector = createSelector(\r\n  exchangeEtherBalance,\r\n  (balance) => {\r\n    return formatBalance(balance)\r\n  }\r\n)\r\n\r\nconst exchangeTokenBalance = state => get(state, 'exchange.tokenBalance', 0)\r\nexport const exchangeTokenBalanceSelector = createSelector(\r\n  exchangeTokenBalance,\r\n  (balance) => {\r\n    return formatBalance(balance)\r\n  }\r\n)\r\n\r\nconst etherDepositAmount = state => get(state, 'exchange.etherDepositAmount', null)\r\nexport const etherDepositAmountSelector = createSelector(etherDepositAmount, amount => amount)\r\n\r\nconst etherWithdrawAmount = state => get(state, 'exchange.etherWithdrawAmount', null)\r\nexport const etherWithdrawAmountSelector = createSelector(etherWithdrawAmount, amount => amount)\r\n\r\nconst tokenDepositAmount = state => get(state, 'exchange.tokenDepositAmount', null)\r\nexport const tokenDepositAmountSelector = createSelector(tokenDepositAmount, amount => amount)\r\n\r\nconst tokenWithdrawAmount = state => get(state, 'exchange.tokenWithdrawAmount', null)\r\nexport const tokenWithdrawAmountSelector = createSelector(tokenWithdrawAmount, amount => amount)\r\n\r\nconst buyOrder = state => get(state, 'exchange.buyOrder', {})\r\nexport const buyOrderSelector = createSelector(buyOrder, order => order)\r\n\r\nconst sellOrder = state => get(state, 'exchange.sellOrder', {})\r\nexport const sellOrderSelector = createSelector(sellOrder, order => order)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { accountSelector } from '../store/selectors'\r\n\r\nclass Navbar extends Component {\r\n  render() {\r\n    return (\r\n      <nav className=\"navbar navbar-expand-lg navbar-dark bg-primary\">\r\n        <a className=\"navbar-brand\" href=\"#/\">DApp Token Exchange</a>\r\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavDropdown\" aria-controls=\"navbarNavDropdown\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <ul className=\"navbar-nav ml-auto\"> \r\n          <li className=\"nav-item\">\r\n            <a\r\n              className=\"nav-link small\"\r\n              href={`https://etherscan.io/address/${this.props.account}`}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              {this.props.account}\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    account: accountSelector(state)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Navbar)\r\n","// WEB3\r\nexport function web3Loaded(connection) {\r\n    return {\r\n      type: 'WEB3_LOADED',\r\n      connection\r\n    }\r\n  }\r\n  \r\n  export function web3AccountLoaded(account) {\r\n    return {\r\n      type: 'WEB3_ACCOUNT_LOADED',\r\n      account\r\n    }\r\n  }\r\n  \r\n  // TOKEN\r\n  export function tokenLoaded(contract) {\r\n    return {\r\n      type: 'TOKEN_LOADED',\r\n      contract\r\n    }\r\n  }\r\n  \r\n  // EXCHANGE\r\n  export function exchangeLoaded(contract) {\r\n    return {\r\n      type: 'EXCHANGE_LOADED',\r\n      contract\r\n    }\r\n  }\r\n  \r\n  export function cancelledOrdersLoaded(cancelledOrders) {\r\n    return {\r\n      type: 'CANCELLED_ORDERS_LOADED',\r\n      cancelledOrders\r\n    }\r\n  }\r\n  \r\n  export function filledOrdersLoaded(filledOrders) {\r\n    return {\r\n      type: 'FILLED_ORDERS_LOADED',\r\n      filledOrders\r\n    }\r\n  }\r\n  \r\n  export function allOrdersLoaded(allOrders) {\r\n    return {\r\n      type: 'ALL_ORDERS_LOADED',\r\n      allOrders\r\n    }\r\n  }\r\n  \r\n  // Cancel Order\r\n  export function orderCancelling() {\r\n    return {\r\n      type: 'ORDER_CANCELLING'\r\n    }\r\n  }\r\n  \r\n  export function orderCancelled(order) {\r\n    return {\r\n      type: 'ORDER_CANCELLED',\r\n      order\r\n    }\r\n  }\r\n  \r\n  // Fill Order\r\n  export function orderFilling() {\r\n    return {\r\n      type: 'ORDER_FILLING'\r\n    }\r\n  }\r\n  \r\n  export function orderFilled(order) {\r\n    return {\r\n      type: 'ORDER_FILLED',\r\n      order\r\n    }\r\n  }\r\n  \r\n  // Balances\r\n  export function etherBalanceLoaded(balance) {\r\n    return {\r\n      type: 'ETHER_BALANCE_LOADED',\r\n      balance\r\n    }\r\n  }\r\n  \r\n  export function tokenBalanceLoaded(balance) {\r\n    return {\r\n      type: 'TOKEN_BALANCE_LOADED',\r\n      balance\r\n    }\r\n  }\r\n  \r\n  export function exchangeEtherBalanceLoaded(balance) {\r\n    return {\r\n      type: 'EXCHANGE_ETHER_BALANCE_LOADED',\r\n      balance\r\n    }\r\n  }\r\n  \r\n  export function exchangeTokenBalanceLoaded(balance) {\r\n    return {\r\n      type: 'EXCHANGE_TOKEN_BALANCE_LOADED',\r\n      balance\r\n    }\r\n  }\r\n  \r\n  export function balancesLoaded() {\r\n    return {\r\n      type: 'BALANCES_LOADED'\r\n    }\r\n  }\r\n  \r\n  export function balancesLoading() {\r\n    return {\r\n      type: 'BALANCES_LOADING'\r\n    }\r\n  }\r\n  \r\n  export function etherDepositAmountChanged(amount) {\r\n    return {\r\n      type: 'ETHER_DEPOSIT_AMOUNT_CHANGED',\r\n      amount\r\n    }\r\n  }\r\n  \r\n  export function etherWithdrawAmountChanged(amount) {\r\n    return {\r\n      type: 'ETHER_WITHDRAW_AMOUNT_CHANGED',\r\n      amount\r\n    }\r\n  }\r\n  \r\n  export function tokenDepositAmountChanged(amount) {\r\n    return {\r\n      type: 'TOKEN_DEPOSIT_AMOUNT_CHANGED',\r\n      amount\r\n    }\r\n  }\r\n  \r\n  export function tokenWithdrawAmountChanged(amount) {\r\n    return {\r\n      type: 'TOKEN_WITHDRAW_AMOUNT_CHANGED',\r\n      amount\r\n    }\r\n  }\r\n  \r\n  // Buy Order\r\n  export function buyOrderAmountChanged(amount) {\r\n    return {\r\n      type: 'BUY_ORDER_AMOUNT_CHANGED',\r\n      amount\r\n    }\r\n  }\r\n  \r\n  export function buyOrderPriceChanged(price) {\r\n    return {\r\n      type: 'BUY_ORDER_PRICE_CHANGED',\r\n      price\r\n    }\r\n  }\r\n  \r\n  export function buyOrderMaking(price) {\r\n    return {\r\n      type: 'BUY_ORDER_MAKING'\r\n    }\r\n  }\r\n  \r\n  // Generic Order\r\n  export function orderMade(order) {\r\n    return {\r\n      type: 'ORDER_MADE',\r\n      order\r\n    }\r\n  }\r\n  \r\n  // Sell Order\r\n  export function sellOrderAmountChanged(amount) {\r\n    return {\r\n      type: 'SELL_ORDER_AMOUNT_CHANGED',\r\n      amount\r\n    }\r\n  }\r\n  \r\n  export function sellOrderPriceChanged(price) {\r\n    return {\r\n      type: 'SELL_ORDER_PRICE_CHANGED',\r\n      price\r\n    }\r\n  }\r\n  \r\n  export function sellOrderMaking(price) {\r\n    return {\r\n      type: 'SELL_ORDER_MAKING'\r\n    }\r\n  }\r\n  ","import Web3 from 'web3'\r\nimport {\r\n  web3Loaded,\r\n  web3AccountLoaded,\r\n  tokenLoaded,\r\n  exchangeLoaded,\r\n  cancelledOrdersLoaded,\r\n  filledOrdersLoaded,\r\n  allOrdersLoaded,\r\n  orderCancelling,\r\n  orderCancelled,\r\n  orderFilling,\r\n  orderFilled,\r\n  etherBalanceLoaded,\r\n  tokenBalanceLoaded,\r\n  exchangeEtherBalanceLoaded,\r\n  exchangeTokenBalanceLoaded,\r\n  balancesLoaded,\r\n  balancesLoading,\r\n  buyOrderMaking,\r\n  sellOrderMaking,\r\n  orderMade\r\n} from './actions'\r\nimport Token from '../abis/Token.json'\r\nimport Exchange from '../abis/Exchange.json'\r\nimport { ETHER_ADDRESS } from '../helpers'\r\n\r\nexport const loadWeb3 = async (dispatch) => {\r\n  if(typeof window.ethereum!=='undefined'){\r\n    const web3 = new Web3(window.ethereum)\r\n    dispatch(web3Loaded(web3))\r\n    return web3\r\n  } else {\r\n    window.alert('Please install MetaMask')\r\n    window.location.assign(\"https://metamask.io/\")\r\n  }\r\n}\r\n\r\nexport const loadAccount = async (web3, dispatch) => {\r\n  const accounts = await web3.eth.getAccounts()\r\n  const account = await accounts[0]\r\n  if(typeof account !== 'undefined'){\r\n    dispatch(web3AccountLoaded(account))\r\n    return account\r\n  } else {\r\n    window.alert('Please login with MetaMask')\r\n    return null\r\n  }\r\n}\r\n\r\nexport const loadToken = async (web3, networkId, dispatch) => {\r\n  try {\r\n    const token = new web3.eth.Contract(Token.abi, Token.networks[networkId].address)\r\n    dispatch(tokenLoaded(token))\r\n    return token\r\n  } catch (error) {\r\n    console.log('Contract not deployed to the current network. Please select another network with Metamask.')\r\n    return null\r\n  }\r\n}\r\n\r\nexport const loadExchange = async (web3, networkId, dispatch) => {\r\n  try {\r\n    const exchange = new web3.eth.Contract(Exchange.abi, Exchange.networks[networkId].address)\r\n    dispatch(exchangeLoaded(exchange))\r\n    return exchange\r\n  } catch (error) {\r\n    console.log('Contract not deployed to the current network. Please select another network with Metamask.')\r\n    return null\r\n  }\r\n}\r\n\r\nexport const loadAllOrders = async (exchange, dispatch) => {\r\n  // Fetch cancelled orders with the \"Cancel\" event stream\r\n  const cancelStream = await exchange.getPastEvents('Cancel', { fromBlock: 0, toBlock: 'latest' })\r\n  // Format cancelled orders\r\n  const cancelledOrders = cancelStream.map((event) => event.returnValues)\r\n  // Add cancelled orders to the redux store\r\n  dispatch(cancelledOrdersLoaded(cancelledOrders))\r\n\r\n  // Fetch filled orders with the \"Trade\" event stream\r\n  const tradeStream = await exchange.getPastEvents('Trade', { fromBlock: 0, toBlock: 'latest' })\r\n  // Format filled orders\r\n  const filledOrders = tradeStream.map((event) => event.returnValues)\r\n  // Add cancelled orders to the redux store\r\n  dispatch(filledOrdersLoaded(filledOrders))\r\n\r\n  // Load order stream\r\n  const orderStream = await exchange.getPastEvents('Order', { fromBlock: 0,  toBlock: 'latest' })\r\n  // Format order stream\r\n  const allOrders = orderStream.map((event) => event.returnValues)\r\n  // Add open orders to the redux store\r\n  dispatch(allOrdersLoaded(allOrders))\r\n}\r\n\r\nexport const subscribeToEvents = async (exchange, dispatch) => {\r\n  exchange.events.Cancel({}, (error, event) => {\r\n    dispatch(orderCancelled(event.returnValues))\r\n  })\r\n\r\n  exchange.events.Trade({}, (error, event) => {\r\n    dispatch(orderFilled(event.returnValues))\r\n  })\r\n\r\n  exchange.events.Deposit({}, (error, event) => {\r\n    dispatch(balancesLoaded())\r\n  })\r\n\r\n  exchange.events.Withdraw({}, (error, event) => {\r\n    dispatch(balancesLoaded())\r\n  })\r\n\r\n  exchange.events.Order({}, (error, event) => {\r\n    dispatch(orderMade(event.returnValues))\r\n  })\r\n}\r\n\r\nexport const cancelOrder = (dispatch, exchange, order, account) => {\r\n  exchange.methods.cancelOrder(order.id).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n     dispatch(orderCancelling())\r\n  })\r\n  .on('error', (error) => {\r\n    console.log(error)\r\n    window.alert('There was an error!')\r\n  })\r\n}\r\n\r\nexport const fillOrder = (dispatch, exchange, order, account) => {\r\n  exchange.methods.fillOrder(order.id).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n     dispatch(orderFilling())\r\n  })\r\n  .on('error', (error) => {\r\n    console.log(error)\r\n    window.alert('There was an error!')\r\n  })\r\n}\r\n\r\nexport const loadBalances = async (dispatch, web3, exchange, token, account) => {\r\n  if(typeof account !== 'undefined') {\r\n      // Ether balance in wallet\r\n      const etherBalance = await web3.eth.getBalance(account)\r\n      dispatch(etherBalanceLoaded(etherBalance))\r\n\r\n      // Token balance in wallet\r\n      const tokenBalance = await token.methods.balanceOf(account).call()\r\n      dispatch(tokenBalanceLoaded(tokenBalance))\r\n\r\n      // Ether balance in exchange\r\n      const exchangeEtherBalance = await exchange.methods.balanceOf(ETHER_ADDRESS, account).call()\r\n      dispatch(exchangeEtherBalanceLoaded(exchangeEtherBalance))\r\n\r\n      // Token balance in exchange\r\n      const exchangeTokenBalance = await exchange.methods.balanceOf(token.options.address, account).call()\r\n      dispatch(exchangeTokenBalanceLoaded(exchangeTokenBalance))\r\n\r\n      // Trigger all balances loaded\r\n      dispatch(balancesLoaded())\r\n    } else {\r\n      window.alert('Please login with MetaMask')\r\n    }\r\n}\r\n\r\nexport const depositEther = (dispatch, exchange, web3, amount, account) => {\r\n  exchange.methods.depositEther().send({ from: account,  value: web3.utils.toWei(amount, 'ether') })\r\n  .on('transactionHash', (hash) => {\r\n    dispatch(balancesLoading())\r\n  })\r\n  .on('error',(error) => {\r\n    console.error(error)\r\n    window.alert(`There was an error!`)\r\n  })\r\n}\r\n\r\nexport const withdrawEther = (dispatch, exchange, web3, amount, account) => {\r\n  exchange.methods.withdrawEther(web3.utils.toWei(amount, 'ether')).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n    dispatch(balancesLoading())\r\n  })\r\n  .on('error',(error) => {\r\n    console.error(error)\r\n    window.alert(`There was an error!`)\r\n  })\r\n}\r\n\r\nexport const depositToken = (dispatch, exchange, web3, token, amount, account) => {\r\n  amount = web3.utils.toWei(amount, 'ether')\r\n\r\n  token.methods.approve(exchange.options.address, amount).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n    exchange.methods.depositToken(token.options.address, amount).send({ from: account })\r\n    .on('transactionHash', (hash) => {\r\n      dispatch(balancesLoading())\r\n    })\r\n    .on('error',(error) => {\r\n      console.error(error)\r\n      window.alert(`There was an error!`)\r\n    })\r\n  })\r\n}\r\n\r\nexport const withdrawToken = (dispatch, exchange, web3, token, amount, account) => {\r\n  exchange.methods.withdrawToken(token.options.address, web3.utils.toWei(amount, 'ether')).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n    dispatch(balancesLoading())\r\n  })\r\n  .on('error',(error) => {\r\n    console.error(error)\r\n    window.alert(`There was an error!`)\r\n  })\r\n}\r\n\r\nexport const makeBuyOrder = (dispatch, exchange, token, web3, order, account) => {\r\n  const tokenGet = token.options.address\r\n  const amountGet = web3.utils.toWei(order.amount, 'ether')\r\n  const tokenGive = ETHER_ADDRESS\r\n  const amountGive = web3.utils.toWei((order.amount * order.price).toString(), 'ether')\r\n\r\n  exchange.methods.makeOrder(tokenGet, amountGet, tokenGive, amountGive).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n    dispatch(buyOrderMaking())\r\n  })\r\n  .on('error',(error) => {\r\n    console.error(error)\r\n    window.alert(`There was an error!`)\r\n  })\r\n}\r\n\r\nexport const makeSellOrder = (dispatch, exchange, token, web3, order, account) => {\r\n  const tokenGet = ETHER_ADDRESS\r\n  const amountGet = web3.utils.toWei((order.amount * order.price).toString(), 'ether')\r\n  const tokenGive = token.options.address\r\n  const amountGive = web3.utils.toWei(order.amount, 'ether')\r\n\r\n  exchange.methods.makeOrder(tokenGet, amountGet, tokenGive, amountGive).send({ from: account })\r\n  .on('transactionHash', (hash) => {\r\n    dispatch(sellOrderMaking())\r\n  })\r\n  .on('error',(error) => {\r\n    console.error(error)\r\n    window.alert(`There was an error!`)\r\n  })\r\n}\r\n","import React from 'react';\r\n\r\nexport default function ({ type }) {\r\n  if(type === 'table') {\r\n    return(<tbody className=\"spinner-border text-light text-center\"></tbody>)\r\n  } else {\r\n    return(<div className=\"spinner-border text-light text-center\"></div>)\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\r\nimport Spinner from './Spinner'\r\nimport {\r\n  orderBookSelector,\r\n  orderBookLoadedSelector,\r\n  exchangeSelector,\r\n  accountSelector,\r\n  orderFillingSelector\r\n} from '../store/selectors'\r\nimport { fillOrder } from '../store/interactions'\r\n\r\nconst renderOrder = (order, props) => {\r\n  const { dispatch, exchange, account } = props\r\n\r\n  return(\r\n    <OverlayTrigger\r\n      key={order.id}\r\n      placement='auto'\r\n      overlay={\r\n        <Tooltip id={order.id}>\r\n          {`Click here to ${order.orderFillAction}`}\r\n        </Tooltip>\r\n      }\r\n    >\r\n      <tr\r\n        key={order.id}\r\n        className=\"order-book-order\"\r\n        onClick={(e) => fillOrder(dispatch, exchange, order, account)}\r\n      >\r\n        <td>{order.tokenAmount}</td>\r\n        <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\r\n        <td>{order.etherAmount}</td>\r\n      </tr>\r\n    </OverlayTrigger>\r\n  )\r\n}\r\n\r\nconst showOrderBook = (props) => {\r\n  const { orderBook } = props\r\n\r\n  return(\r\n    <tbody>\r\n      {orderBook.sellOrders.map((order) => renderOrder(order, props))}\r\n      <tr>\r\n        <th>DAPP</th>\r\n        <th>DAPP/ETH</th>\r\n        <th>ETH</th>\r\n      </tr>\r\n      {orderBook.buyOrders.map((order) => renderOrder(order, props))}\r\n    </tbody>\r\n  )\r\n}\r\n\r\nclass OrderBook extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"vertical\">\r\n        <div className=\"card bg-dark text-white\">\r\n          <div className=\"card-header\">\r\n            Order Book\r\n          </div>\r\n          <div className=\"card-body order-book\">\r\n            <table className=\"table table-dark table-sm small\">\r\n              { this.props.showOrderBook ? showOrderBook(this.props) : <Spinner type='table' /> }\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const orderBookLoaded = orderBookLoadedSelector(state)\r\n  const orderFilling = orderFillingSelector(state)\r\n\r\n  return {\r\n    orderBook: orderBookSelector(state),\r\n    showOrderBook: orderBookLoaded && !orderFilling,\r\n    exchange: exchangeSelector(state),\r\n    account: accountSelector(state)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(OrderBook);\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Spinner from './Spinner'\r\nimport {\r\n  filledOrdersLoadedSelector,\r\n  filledOrdersSelector\r\n} from '../store/selectors'\r\n\r\nconst showFilledOrders = (filledOrders) => {\r\n  return(\r\n    <tbody>\r\n      { filledOrders.map((order) => {\r\n        return(\r\n          <tr className={`order-${order.id}`} key={order.id}>\r\n            <td className=\"text-muted\">{order.formattedTimestamp}</td>\r\n            <td>{order.tokenAmount}</td>\r\n            <td className={`text-${order.tokenPriceClass}`}>{order.tokenPrice}</td>\r\n          </tr>\r\n        )\r\n      }) }\r\n    </tbody>\r\n  )\r\n}\r\n\r\nclass Trades extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"vertical\">\r\n        <div className=\"card bg-dark text-white\">\r\n          <div className=\"card-header\">\r\n            Trades\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <table className=\"table table-dark table-sm small\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Time</th>\r\n                  <th>DAPP</th>\r\n                  <th>DAPP/ETH</th>\r\n                </tr>\r\n              </thead>\r\n              { this.props.filledOrdersLoaded ? showFilledOrders(this.props.filledOrders) : <Spinner type=\"table\" />}\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    filledOrdersLoaded: filledOrdersLoadedSelector(state),\r\n    filledOrders: filledOrdersSelector(state),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Trades)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab } from 'react-bootstrap'\r\nimport Spinner from './Spinner'\r\nimport {\r\n  myFilledOrdersLoadedSelector,\r\n  myFilledOrdersSelector,\r\n  myOpenOrdersLoadedSelector,\r\n  myOpenOrdersSelector,\r\n  exchangeSelector,\r\n  accountSelector,\r\n  orderCancellingSelector\r\n} from '../store/selectors'\r\nimport { cancelOrder } from '../store/interactions'\r\n\r\nconst showMyFilledOrders = (props) => {\r\n  const { myFilledOrders } = props\r\n\r\n  return(\r\n    <tbody>\r\n      { myFilledOrders.map((order) => {\r\n        return (\r\n          <tr key={order.id}>\r\n            <td className=\"text-muted\">{order.formattedTimestamp}</td>\r\n            <td className={`text-${order.orderTypeClass}`}>{order.orderSign}{order.tokenAmount}</td>\r\n            <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\r\n          </tr>\r\n        )\r\n      }) }\r\n    </tbody>\r\n  )\r\n}\r\n\r\nconst showMyOpenOrders = (props) => {\r\n  const { myOpenOrders, dispatch, exchange, account } = props\r\n\r\n  return(\r\n    <tbody>\r\n      { myOpenOrders.map((order) => {\r\n        return (\r\n          <tr key={order.id}>\r\n            <td className={`text-${order.orderTypeClass}`}>{order.tokenAmount}</td>\r\n            <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\r\n            <td\r\n              className=\"text-muted cancel-order\"\r\n              onClick={(e) => {\r\n                cancelOrder(dispatch, exchange, order, account)\r\n              }}\r\n            >X</td>\r\n          </tr>\r\n        )\r\n      }) }\r\n    </tbody>\r\n  )\r\n}\r\n\r\nclass MyTransactions extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card bg-dark text-white\">\r\n        <div className=\"card-header\">\r\n          My Transactions\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <Tabs defaultActiveKey=\"trades\" className=\"bg-dark text-white\">\r\n            <Tab eventKey=\"trades\" title=\"Trades\" className=\"bg-dark\">\r\n              <table className=\"table table-dark table-sm small\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Time</th>\r\n                    <th>DAPP</th>\r\n                    <th>DAPP/ETH</th>\r\n                  </tr>\r\n                </thead>\r\n                { this.props.showMyFilledOrders ? showMyFilledOrders(this.props) : <Spinner type=\"table\" />}\r\n              </table>\r\n            </Tab>\r\n            <Tab eventKey=\"orders\" title=\"Orders\">\r\n              <table className=\"table table-dark table-sm small\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Amount</th>\r\n                    <th>DAPP/ETH</th>\r\n                    <th>Cancel</th>\r\n                  </tr>\r\n                </thead>\r\n                { this.props.showMyOpenOrders ? showMyOpenOrders(this.props) : <Spinner type=\"table\" />}\r\n              </table>\r\n            </Tab>\r\n          </Tabs>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const myOpenOrdersLoaded = myOpenOrdersLoadedSelector(state)\r\n  const orderCancelling = orderCancellingSelector(state)\r\n\r\n  return {\r\n    myFilledOrders: myFilledOrdersSelector(state),\r\n    showMyFilledOrders: myFilledOrdersLoadedSelector(state),\r\n    myOpenOrders: myOpenOrdersSelector(state),\r\n    showMyOpenOrders: myOpenOrdersLoaded && !orderCancelling,\r\n    exchange: exchangeSelector(state),\r\n    account: accountSelector(state)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MyTransactions);\r\n","export const chartOptions = {\r\n    chart: {\r\n      animations: { enabled: false },\r\n      toolbar: { show: false },\r\n      width: '100px'\r\n    },\r\n    tooltip: {\r\n      enabled: true,\r\n      theme: false,\r\n      style: {\r\n        fontSize: '12px',\r\n        fontFamily: undefined\r\n      },\r\n      x: {\r\n          show: false,\r\n          format: 'dd MMM',\r\n          formatter: undefined,\r\n      },\r\n      y: {\r\n        show: true,\r\n        title: 'price'\r\n      },\r\n      marker: {\r\n        show: false,\r\n      },\r\n      items: {\r\n         display: 'flex',\r\n      },\r\n      fixed: {\r\n          enabled: false,\r\n          position: 'topRight',\r\n          offsetX: 0,\r\n          offsetY: 0,\r\n      },\r\n    },\r\n    xaxis: {\r\n      type: 'datetime',\r\n      labels: {\r\n        show: true,\r\n        style: {\r\n            colors: '#fff',\r\n            fontSize: '8px',\r\n            cssClass: 'apexcharts-xaxis-label',\r\n        },\r\n      },\r\n    },\r\n    yaxis: {\r\n      labels: {\r\n        show: true,\r\n        minWidth: 0,\r\n        maxWidth: 160,\r\n        style: {\r\n          color: '#fff',\r\n          fontSize: '8px',\r\n          cssClass: 'apexcharts-yaxis-label',\r\n        },\r\n        offsetX: 0,\r\n        offsetY: 0,\r\n        rotate: 0,\r\n      }\r\n    }\r\n  }\r\n  \r\n  export const dummyData = [\r\n    {\r\n      data: [\r\n        {\r\n          x: new Date(1538778600000),\r\n          y: [6629.81, 6650.5, 6623.04, 6633.33]\r\n        },\r\n        {\r\n          x: new Date(1538780400000),\r\n          y: [6632.01, 6643.59, 6620, 6630.11]\r\n        },\r\n        {\r\n          x: new Date(1538782200000),\r\n          y: [6630.71, 6648.95, 6623.34, 6635.65]\r\n        },\r\n        {\r\n          x: new Date(1538784000000),\r\n          y: [6635.65, 6651, 6629.67, 6638.24]\r\n        },\r\n        {\r\n          x: new Date(1538785800000),\r\n          y: [6638.24, 6640, 6620, 6624.47]\r\n        },\r\n        {\r\n          x: new Date(1538787600000),\r\n          y: [6624.53, 6636.03, 6621.68, 6624.31]\r\n        },\r\n        {\r\n          x: new Date(1538789400000),\r\n          y: [6624.61, 6632.2, 6617, 6626.02]\r\n        },\r\n        {\r\n          x: new Date(1538791200000),\r\n          y: [6627, 6627.62, 6584.22, 6603.02]\r\n        },\r\n        {\r\n          x: new Date(1538793000000),\r\n          y: [6605, 6608.03, 6598.95, 6604.01]\r\n        },\r\n        {\r\n          x: new Date(1538794800000),\r\n          y: [6604.5, 6614.4, 6602.26, 6608.02]\r\n        },\r\n        {\r\n          x: new Date(1538796600000),\r\n          y: [6608.02, 6610.68, 6601.99, 6608.91]\r\n        },\r\n        {\r\n          x: new Date(1538798400000),\r\n          y: [6608.91, 6618.99, 6608.01, 6612]\r\n        },\r\n        {\r\n          x: new Date(1538800200000),\r\n          y: [6612, 6615.13, 6605.09, 6612]\r\n        },\r\n        {\r\n          x: new Date(1538802000000),\r\n          y: [6612, 6624.12, 6608.43, 6622.95]\r\n        },\r\n        {\r\n          x: new Date(1538803800000),\r\n          y: [6623.91, 6623.91, 6615, 6615.67]\r\n        },\r\n        {\r\n          x: new Date(1538805600000),\r\n          y: [6618.69, 6618.74, 6610, 6610.4]\r\n        },\r\n        {\r\n          x: new Date(1538807400000),\r\n          y: [6611, 6622.78, 6610.4, 6614.9]\r\n        },\r\n        {\r\n          x: new Date(1538809200000),\r\n          y: [6614.9, 6626.2, 6613.33, 6623.45]\r\n        },\r\n        {\r\n          x: new Date(1538811000000),\r\n          y: [6623.48, 6627, 6618.38, 6620.35]\r\n        },\r\n        {\r\n          x: new Date(1538812800000),\r\n          y: [6619.43, 6620.35, 6610.05, 6615.53]\r\n        },\r\n        {\r\n          x: new Date(1538814600000),\r\n          y: [6615.53, 6617.93, 6610, 6615.19]\r\n        },\r\n        {\r\n          x: new Date(1538816400000),\r\n          y: [6615.19, 6621.6, 6608.2, 6620]\r\n        },\r\n        {\r\n          x: new Date(1538818200000),\r\n          y: [6619.54, 6625.17, 6614.15, 6620]\r\n        },\r\n        {\r\n          x: new Date(1538820000000),\r\n          y: [6620.33, 6634.15, 6617.24, 6624.61]\r\n        },\r\n        {\r\n          x: new Date(1538821800000),\r\n          y: [6625.95, 6626, 6611.66, 6617.58]\r\n        },\r\n        {\r\n          x: new Date(1538823600000),\r\n          y: [6619, 6625.97, 6595.27, 6598.86]\r\n        },\r\n        {\r\n          x: new Date(1538825400000),\r\n          y: [6598.86, 6598.88, 6570, 6587.16]\r\n        },\r\n        {\r\n          x: new Date(1538827200000),\r\n          y: [6588.86, 6600, 6580, 6593.4]\r\n        },\r\n        {\r\n          x: new Date(1538829000000),\r\n          y: [6593.99, 6598.89, 6585, 6587.81]\r\n        },\r\n        {\r\n          x: new Date(1538830800000),\r\n          y: [6587.81, 6592.73, 6567.14, 6578]\r\n        },\r\n        {\r\n          x: new Date(1538832600000),\r\n          y: [6578.35, 6581.72, 6567.39, 6579]\r\n        },\r\n        {\r\n          x: new Date(1538834400000),\r\n          y: [6579.38, 6580.92, 6566.77, 6575.96]\r\n        },\r\n        {\r\n          x: new Date(1538836200000),\r\n          y: [6575.96, 6589, 6571.77, 6588.92]\r\n        },\r\n        {\r\n          x: new Date(1538838000000),\r\n          y: [6588.92, 6594, 6577.55, 6589.22]\r\n        },\r\n        {\r\n          x: new Date(1538839800000),\r\n          y: [6589.3, 6598.89, 6589.1, 6596.08]\r\n        },\r\n        {\r\n          x: new Date(1538841600000),\r\n          y: [6597.5, 6600, 6588.39, 6596.25]\r\n        },\r\n        {\r\n          x: new Date(1538843400000),\r\n          y: [6598.03, 6600, 6588.73, 6595.97]\r\n        },\r\n        {\r\n          x: new Date(1538845200000),\r\n          y: [6595.97, 6602.01, 6588.17, 6602]\r\n        },\r\n        {\r\n          x: new Date(1538847000000),\r\n          y: [6602, 6607, 6596.51, 6599.95]\r\n        },\r\n        {\r\n          x: new Date(1538848800000),\r\n          y: [6600.63, 6601.21, 6590.39, 6591.02]\r\n        },\r\n        {\r\n          x: new Date(1538850600000),\r\n          y: [6591.02, 6603.08, 6591, 6591]\r\n        },\r\n        {\r\n          x: new Date(1538852400000),\r\n          y: [6591, 6601.32, 6585, 6592]\r\n        },\r\n        {\r\n          x: new Date(1538854200000),\r\n          y: [6593.13, 6596.01, 6590, 6593.34]\r\n        },\r\n        {\r\n          x: new Date(1538856000000),\r\n          y: [6593.34, 6604.76, 6582.63, 6593.86]\r\n        },\r\n        {\r\n          x: new Date(1538857800000),\r\n          y: [6593.86, 6604.28, 6586.57, 6600.01]\r\n        },\r\n        {\r\n          x: new Date(1538859600000),\r\n          y: [6601.81, 6603.21, 6592.78, 6596.25]\r\n        },\r\n        {\r\n          x: new Date(1538861400000),\r\n          y: [6596.25, 6604.2, 6590, 6602.99]\r\n        },\r\n        {\r\n          x: new Date(1538863200000),\r\n          y: [6602.99, 6606, 6584.99, 6587.81]\r\n        },\r\n        {\r\n          x: new Date(1538865000000),\r\n          y: [6587.81, 6595, 6583.27, 6591.96]\r\n        },\r\n        {\r\n          x: new Date(1538866800000),\r\n          y: [6591.97, 6596.07, 6585, 6588.39]\r\n        },\r\n        {\r\n          x: new Date(1538868600000),\r\n          y: [6587.6, 6598.21, 6587.6, 6594.27]\r\n        },\r\n        {\r\n          x: new Date(1538870400000),\r\n          y: [6596.44, 6601, 6590, 6596.55]\r\n        },\r\n        {\r\n          x: new Date(1538872200000),\r\n          y: [6598.91, 6605, 6596.61, 6600.02]\r\n        },\r\n        {\r\n          x: new Date(1538874000000),\r\n          y: [6600.55, 6605, 6589.14, 6593.01]\r\n        },\r\n        {\r\n          x: new Date(1538875800000),\r\n          y: [6593.15, 6605, 6592, 6603.06]\r\n        },\r\n        {\r\n          x: new Date(1538877600000),\r\n          y: [6603.07, 6604.5, 6599.09, 6603.89]\r\n        },\r\n        {\r\n          x: new Date(1538879400000),\r\n          y: [6604.44, 6604.44, 6600, 6603.5]\r\n        },\r\n        {\r\n          x: new Date(1538881200000),\r\n          y: [6603.5, 6603.99, 6597.5, 6603.86]\r\n        },\r\n        {\r\n          x: new Date(1538883000000),\r\n          y: [6603.85, 6605, 6600, 6604.07]\r\n        },\r\n        {\r\n          x: new Date(1538884800000),\r\n          y: [6604.98, 6606, 6604.07, 6606]\r\n        },\r\n      ]\r\n    }\r\n  ]\r\n  ","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Chart from 'react-apexcharts'\r\nimport Spinner from './Spinner'\r\nimport { chartOptions, dummyData } from './PriceChart.config'\r\nimport {\r\n  priceChartLoadedSelector,\r\n  priceChartSelector\r\n} from '../store/selectors'\r\n\r\nconst priceSymbol = (lastPriceChange) => {\r\n  let output\r\n  if(lastPriceChange === '+') {\r\n    output = <span className=\"text-success\">&#9650;</span> // Green up tiangle\r\n  } else {\r\n    output = <span className=\"text-danger\">&#9660;</span> // Red down triangle\r\n  }\r\n  return(output)\r\n}\r\n\r\nconst showPriceChart = (priceChart) => {\r\n  return(\r\n    <div className=\"price-chart\">\r\n      <div className=\"price\">\r\n        <h4>DAPP/ETH &nbsp; {priceSymbol(priceChart.lastPriceChange)} &nbsp; {priceChart.lastPrice}</h4>\r\n      </div>\r\n      <Chart options={chartOptions} series={priceChart.series} type='candlestick' width='100%' height='100%' />\r\n    </div>\r\n  )\r\n}\r\n\r\nclass PriceChart extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"card bg-dark text-white\">\r\n        <div className=\"card-header\">\r\n          Price Chart\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {this.props.priceChartLoaded ? showPriceChart(this.props.priceChart) : <Spinner />}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\r\n  return {\r\n    priceChartLoaded: priceChartLoadedSelector(state),\r\n    priceChart: priceChartSelector(state),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PriceChart)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab } from 'react-bootstrap'\r\nimport Spinner from './Spinner'\r\nimport {\r\n  loadBalances,\r\n  depositEther,\r\n  depositToken,\r\n  withdrawEther,\r\n  withdrawToken\r\n} from '../store/interactions'\r\nimport {\r\n  exchangeSelector,\r\n  tokenSelector,\r\n  accountSelector,\r\n  web3Selector,\r\n  etherBalanceSelector,\r\n  tokenBalanceSelector,\r\n  exchangeEtherBalanceSelector,\r\n  exchangeTokenBalanceSelector,\r\n  balancesLoadingSelector,\r\n  etherDepositAmountSelector,\r\n  etherWithdrawAmountSelector,\r\n  tokenDepositAmountSelector,\r\n  tokenWithdrawAmountSelector,\r\n} from '../store/selectors'\r\nimport {\r\n  etherDepositAmountChanged,\r\n  etherWithdrawAmountChanged,\r\n  tokenDepositAmountChanged,\r\n  tokenWithdrawAmountChanged,\r\n} from '../store/actions'\r\nconst showForm = (props) => {\r\n  const {\r\n    dispatch,\r\n    exchange,\r\n    web3,\r\n    account,\r\n    etherBalance,\r\n    tokenBalance,\r\n    exchangeEtherBalance,\r\n    exchangeTokenBalance,\r\n    etherDepositAmount,\r\n    token,\r\n    tokenDepositAmount,\r\n    etherWithdrawAmount,\r\n    tokenWithdrawAmount\r\n  } = props\r\n\r\n  return(\r\n    <Tabs defaultActiveKey=\"deposit\" className=\"bg-dark text-white\">\r\n\r\n      <Tab eventKey=\"deposit\" title=\"Deposit\" className=\"bg-dark\">\r\n        <table className=\"table table-dark table-sm small\">\r\n          <thead>\r\n            <tr>\r\n              <th>Token</th>\r\n              <th>Wallet</th>\r\n              <th>Exchange</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>ETH</td>\r\n              <td>{etherBalance}</td>\r\n              <td>{exchangeEtherBalance}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <form className=\"row\" onSubmit={(event) => {\r\n          event.preventDefault()\r\n          depositEther(dispatch, exchange, web3, etherDepositAmount, account)\r\n        }}>\r\n          <div className=\"col-12 col-sm pr-sm-2\">\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"ETH Amount\"\r\n            onChange={(e) => dispatch( etherDepositAmountChanged(e.target.value) ) }\r\n            className=\"form-control form-control-sm bg-dark text-white\"\r\n            required />\r\n          </div>\r\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\r\n            <button type=\"submit\" className=\"btn btn-primary btn-block btn-sm\">Deposit</button>\r\n          </div>\r\n        </form>\r\n\r\n        <table className=\"table table-dark table-sm small\">\r\n          <tbody>\r\n            <tr>\r\n              <td>DAPP</td>\r\n              <td>{tokenBalance}</td>\r\n              <td>{exchangeTokenBalance}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <form className=\"row\" onSubmit={(event) => {\r\n          event.preventDefault()\r\n          depositToken(dispatch, exchange, web3, token, tokenDepositAmount, account)\r\n        }}>\r\n          <div className=\"col-12 col-sm pr-sm-2\">\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"DAPP Amount\"\r\n            onChange={(e) => dispatch( tokenDepositAmountChanged(e.target.value) )}\r\n            className=\"form-control form-control-sm bg-dark text-white\"\r\n            required />\r\n          </div>\r\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\r\n            <button type=\"submit\" className=\"btn btn-primary btn-block btn-sm\">Deposit</button>\r\n          </div>\r\n        </form>\r\n\r\n      </Tab>\r\n\r\n      <Tab eventKey=\"withdraw\" title=\"Withdraw\" className=\"bg-dark\">\r\n\r\n        <table className=\"table table-dark table-sm small\">\r\n          <thead>\r\n            <tr>\r\n              <th>Token</th>\r\n              <th>Wallet</th>\r\n              <th>Exchange</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr>\r\n              <td>ETH</td>\r\n              <td>{etherBalance}</td>\r\n              <td>{exchangeEtherBalance}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <form className=\"row\" onSubmit={(event) => {\r\n          event.preventDefault()\r\n          withdrawEther(dispatch, exchange, web3, etherWithdrawAmount, account)\r\n        }}>\r\n          <div className=\"col-12 col-sm pr-sm-2\">\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"ETH Amount\"\r\n            onChange={(e) => dispatch( etherWithdrawAmountChanged(e.target.value) )}\r\n            className=\"form-control form-control-sm bg-dark text-white\"\r\n            required />\r\n          </div>\r\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\r\n            <button type=\"submit\" className=\"btn btn-primary btn-block btn-sm\">Withdraw</button>\r\n          </div>\r\n        </form>\r\n\r\n        <table className=\"table table-dark table-sm small\">\r\n          <tbody>\r\n            <tr>\r\n              <td>DAPP</td>\r\n              <td>{tokenBalance}</td>\r\n              <td>{exchangeTokenBalance}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n\r\n        <form className=\"row\" onSubmit={(event) => {\r\n          event.preventDefault()\r\n          withdrawToken(dispatch, exchange, web3, token, tokenWithdrawAmount, account)\r\n        }}>\r\n          <div className=\"col-12 col-sm pr-sm-2\">\r\n            <input\r\n            type=\"text\"\r\n            placeholder=\"DAPP Amount\"\r\n            onChange={(e) => dispatch( tokenWithdrawAmountChanged(e.target.value) )}\r\n            className=\"form-control form-control-sm bg-dark text-white\"\r\n            required />\r\n          </div>\r\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\r\n            <button type=\"submit\" className=\"btn btn-primary btn-block btn-sm\">Withdraw</button>\r\n          </div>\r\n        </form>\r\n\r\n      </Tab>\r\n    </Tabs>\r\n  )\r\n}\r\n\r\nclass Balance extends Component {\r\n  componentWillMount() {\r\n    this.loadBlockchainData()\r\n  }\r\n\r\n  async loadBlockchainData() {\r\n    const { dispatch, web3, exchange, token, account } = this.props\r\n    await loadBalances(dispatch, web3, exchange, token, account)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card bg-dark text-white\">\r\n        <div className=\"card-header\">\r\n          Balance\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {this.props.showForm ? showForm(this.props) : <Spinner />}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const balancesLoading = balancesLoadingSelector(state)\r\n\r\n  return {\r\n    account: accountSelector(state),\r\n    exchange: exchangeSelector(state),\r\n    token: tokenSelector(state),\r\n    web3: web3Selector(state),\r\n    etherBalance: etherBalanceSelector(state),\r\n    tokenBalance: tokenBalanceSelector(state),\r\n    exchangeEtherBalance: exchangeEtherBalanceSelector(state),\r\n    exchangeTokenBalance: exchangeTokenBalanceSelector(state),\r\n    balancesLoading,\r\n    showForm: !balancesLoading,\r\n    etherDepositAmount: etherDepositAmountSelector(state),\r\n    etherWithdrawAmount: etherWithdrawAmountSelector(state),\r\n    tokenDepositAmount: tokenDepositAmountSelector(state),\r\n    tokenWithdrawAmount: tokenWithdrawAmountSelector(state),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Balance)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Tabs, Tab } from 'react-bootstrap'\r\nimport Spinner from './Spinner'\r\nimport {\r\n  exchangeSelector,\r\n  tokenSelector,\r\n  accountSelector,\r\n  web3Selector,\r\n  buyOrderSelector,\r\n  sellOrderSelector\r\n} from '../store/selectors'\r\nimport {\r\n  buyOrderAmountChanged,\r\n  buyOrderPriceChanged,\r\n  sellOrderAmountChanged,\r\n  sellOrderPriceChanged,\r\n} from '../store/actions'\r\nimport {\r\n  makeBuyOrder,\r\n  makeSellOrder\r\n} from '../store/interactions'\r\n\r\nconst showForm = (props) => {\r\n  const {\r\n    dispatch,\r\n    buyOrder,\r\n    exchange,\r\n    token,\r\n    web3,\r\n    account,\r\n    sellOrder,\r\n    showBuyTotal,\r\n    showSellTotal\r\n  } = props\r\n\r\n  return(\r\n    <Tabs defaultActiveKey=\"buy\" className=\"bg-dark text-white\">\r\n\r\n      <Tab eventKey=\"buy\" title=\"Buy\" className=\"bg-dark\">\r\n\r\n          <form onSubmit={(event) => {\r\n            event.preventDefault()\r\n            makeBuyOrder(dispatch, exchange, token, web3, buyOrder, account)\r\n          }}>\r\n          <div className=\"form-group small\">\r\n            <label>Buy Amount (DAPP)</label>\r\n            <div className=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control form-control-sm bg-dark text-white\"\r\n                placeholder=\"Buy Amount\"\r\n                onChange={(e) => dispatch( buyOrderAmountChanged( e.target.value ) )}\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group small\">\r\n            <label>Buy Price</label>\r\n            <div className=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                className=\"form-control form-control-sm bg-dark text-white\"\r\n                placeholder=\"Buy Price\"\r\n                onChange={(e) => dispatch( buyOrderPriceChanged( e.target.value ) )}\r\n                required\r\n              />\r\n            </div>\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary btn-sm btn-block\">Buy Order</button>\r\n          { showBuyTotal ? <small>Total: {buyOrder.amount * buyOrder.price} ETH</small> : null }\r\n        </form>\r\n\r\n      </Tab>\r\n\r\n      <Tab eventKey=\"sell\" title=\"Sell\" className=\"bg-dark\">\r\n\r\n        <form onSubmit={(event) => {\r\n          event.preventDefault()\r\n          makeSellOrder(dispatch, exchange, token, web3, sellOrder, account)\r\n        }}>\r\n        <div className=\"form-group small\">\r\n          <label>Buy Sell (DAPP)</label>\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control form-control-sm bg-dark text-white\"\r\n              placeholder=\"Sell amount\"\r\n              onChange={(e) => dispatch( sellOrderAmountChanged( e.target.value ) )}\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"form-group small\">\r\n          <label>Sell Price</label>\r\n          <div className=\"input-group\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"form-control form-control-sm bg-dark text-white\"\r\n              placeholder=\"Sell Price\"\r\n              onChange={(e) => dispatch( sellOrderPriceChanged( e.target.value ) )}\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary btn-sm btn-block\">Sell Order</button>\r\n        { showSellTotal ? <small>Total: {sellOrder.amount * sellOrder.price} ETH</small> : null }\r\n      </form>\r\n\r\n      </Tab>\r\n    </Tabs>\r\n  )\r\n}\r\n\r\nclass NewOrder extends Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card bg-dark text-white\">\r\n        <div className=\"card-header\">\r\n          New Order\r\n        </div>\r\n        <div className=\"card-body\">\r\n          {this.props.showForm ? showForm(this.props) : <Spinner />}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  const buyOrder = buyOrderSelector(state)\r\n  const sellOrder = sellOrderSelector(state)\r\n\r\n  return {\r\n    account: accountSelector(state),\r\n    exchange: exchangeSelector(state),\r\n    token: tokenSelector(state),\r\n    web3: web3Selector(state),\r\n    buyOrder,\r\n    sellOrder,\r\n    showForm: !buyOrder.making && !sellOrder.making,\r\n    showBuyTotal: buyOrder.amount && buyOrder.price,\r\n    showSellTotal: sellOrder.amount && sellOrder.price\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(NewOrder)\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { exchangeSelector } from '../store/selectors'\r\nimport { loadAllOrders, subscribeToEvents } from '../store/interactions'\r\nimport OrderBook from './OrderBook'\r\nimport Trades from './Trades'\r\nimport MyTransactions from './MyTransactions'\r\nimport PriceChart from './PriceChart'\r\nimport Balance from './Balance'\r\nimport NewOrder from './NewOrder'\r\n\r\nclass Content extends Component {\r\n  componentWillMount() {\r\n    this.loadBlockchainData(this.props)\r\n  }\r\n\r\n  async loadBlockchainData(props) {\r\n    const { dispatch, exchange } = props\r\n    await loadAllOrders(exchange, dispatch)\r\n    await subscribeToEvents(exchange, dispatch)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"content\">\r\n        <div className=\"vertical-split\">\r\n          <Balance />\r\n          <NewOrder />\r\n        </div>\r\n        <OrderBook />\r\n        <div className=\"vertical-split\">\r\n          <PriceChart />\r\n          <MyTransactions />\r\n        </div>\r\n        <Trades />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    exchange: exchangeSelector(state)\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Content)\r\n","import React, { Component } from 'react'\nimport './App.css'\nimport Navbar from './navbar'\nimport Content from './Content'\nimport { connect } from 'react-redux'\nimport {\n  loadWeb3,\n  loadAccount,\n  loadToken,\n  loadExchange\n} from '../store/interactions'\nimport { contractsLoadedSelector } from '../store/selectors'\n\nclass App extends Component {\n  componentWillMount() {\n    this.loadBlockchainData(this.props.dispatch)\n  }\n\n  async loadBlockchainData(dispatch) {\n    const web3 = await loadWeb3(dispatch)\n    const networkId = await web3.eth.net.getId()\n    await loadAccount(web3, dispatch)\n    const token = await loadToken(web3, networkId, dispatch)\n    if(!token) {\n      window.alert('Token smart contract not detected on the current network. Please select another network with Metamask.')\n      return\n    }\n    const exchange = await loadExchange(web3, networkId, dispatch)\n    if(!exchange) {\n      window.alert('Exchange smart contract not detected on the current network. Please select another network with Metamask.')\n      return\n    }\n  }\n\n  render() {\n    return (\n      <div>\n        <Navbar />\n        { this.props.contractsLoaded ? <Content /> : <div className=\"content\"></div> }\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    contractsLoaded: contractsLoadedSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(App)","import { combineReducers } from 'redux';\r\n\r\nfunction web3(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'WEB3_LOADED':\r\n      return { ...state,  connection: action.connection }\r\n    case 'WEB3_ACCOUNT_LOADED':\r\n      return { ...state, account: action.account }\r\n    case 'ETHER_BALANCE_LOADED':\r\n      return { ...state, balance: action.balance }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nfunction token(state = {}, action) {\r\n  switch (action.type) {\r\n    case 'TOKEN_LOADED':\r\n      return { ...state, loaded: true, contract: action.contract }\r\n    case 'TOKEN_BALANCE_LOADED':\r\n      return { ...state, balance: action.balance }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nfunction exchange(state = {}, action) {\r\n  let index, data\r\n\r\n  switch (action.type) {\r\n    case 'EXCHANGE_LOADED':\r\n      return { ...state, loaded: true, contract: action.contract }\r\n    case 'CANCELLED_ORDERS_LOADED':\r\n      return { ...state, cancelledOrders: { loaded: true, data: action.cancelledOrders } }\r\n    case 'FILLED_ORDERS_LOADED':\r\n      return { ...state, filledOrders: { loaded: true, data: action.filledOrders } }\r\n    case 'ALL_ORDERS_LOADED':\r\n      return { ...state, allOrders: { loaded: true, data: action.allOrders } }\r\n    case 'ORDER_CANCELLING':\r\n      return { ...state, orderCancelling: true }\r\n    case 'ORDER_CANCELLED':\r\n      return {\r\n        ...state,\r\n        orderCancelling: false,\r\n        cancelledOrders: {\r\n          ...state.cancelledOrders,\r\n          data: [\r\n            ...state.cancelledOrders.data,\r\n            action.order\r\n          ]\r\n        }\r\n      }\r\n    case 'ORDER_FILLED':\r\n      // Prevent duplicate orders\r\n      index = state.filledOrders.data.findIndex(order => order.id === action.order.id);\r\n\r\n      if(index === -1) {\r\n        data = [...state.filledOrders.data, action.order]\r\n      } else {\r\n        data = state.filledOrders.data\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        orderFilling: false,\r\n        filledOrders: {\r\n          ...state.filledOrders,\r\n          data\r\n        }\r\n      }\r\n\r\n    case 'ORDER_FILLING':\r\n      return { ...state, orderFilling: true }\r\n\r\n    case 'EXCHANGE_ETHER_BALANCE_LOADED':\r\n      return { ...state, etherBalance: action.balance }\r\n    case 'EXCHANGE_TOKEN_BALANCE_LOADED':\r\n      return { ...state, tokenBalance: action.balance }\r\n    case 'BALANCES_LOADING':\r\n      return { ...state, balancesLoading: true }\r\n    case 'BALANCES_LOADED':\r\n      return { ...state, balancesLoading: false }\r\n    case 'ETHER_DEPOSIT_AMOUNT_CHANGED':\r\n      return { ...state, etherDepositAmount: action.amount }\r\n    case 'ETHER_WITHDRAW_AMOUNT_CHANGED':\r\n      return { ...state, etherWithdrawAmount: action.amount }\r\n    case 'TOKEN_DEPOSIT_AMOUNT_CHANGED':\r\n      return { ...state, tokenDepositAmount: action.amount }\r\n    case 'TOKEN_WITHDRAW_AMOUNT_CHANGED':\r\n      return { ...state, tokenWithdrawAmount: action.amount }\r\n\r\n    case 'BUY_ORDER_AMOUNT_CHANGED':\r\n      return { ...state, buyOrder: { ...state.buyOrder, amount: action.amount } }\r\n    case 'BUY_ORDER_PRICE_CHANGED':\r\n      return { ...state, buyOrder: { ...state.buyOrder, price: action.price } }\r\n    case 'BUY_ORDER_MAKING':\r\n      return { ...state, buyOrder: { ...state.buyOrder, amount: null, price: null, making: true } }\r\n\r\n    case 'ORDER_MADE':\r\n      // Prevent duplicate orders\r\n      index = state.allOrders.data.findIndex(order => order.id === action.order.id);\r\n\r\n      if(index === -1) {\r\n        data = [...state.allOrders.data, action.order]\r\n      } else {\r\n        data = state.allOrders.data\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        allOrders: {\r\n          ...state.allOrders,\r\n          data\r\n        },\r\n        buyOrder: {\r\n          ...state.buyOrder,\r\n          making: false\r\n        },\r\n        sellOrder: {\r\n          ...state.sellOrder,\r\n          making: false\r\n        }\r\n      }\r\n\r\n    case 'SELL_ORDER_AMOUNT_CHANGED':\r\n      return { ...state, sellOrder: { ...state.sellOrder, amount: action.amount } }\r\n    case 'SELL_ORDER_PRICE_CHANGED':\r\n      return { ...state, sellOrder: { ...state.sellOrder, price: action.price } }\r\n    case 'SELL_ORDER_MAKING':\r\n      return { ...state, sellOrder: { ...state.sellOrder, amount: null, price: null, making: true } }\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst rootReducer = combineReducers({\r\n  web3,\r\n  token,\r\n  exchange\r\n})\r\n\r\nexport default rootReducer\r\n","import { createStore, applyMiddleware, compose } from 'redux'\r\nimport { createLogger } from 'redux-logger'\r\nimport rootReducer from './reducers'\r\n\r\nconst loggerMiddleware = createLogger()\r\nconst middleware = []\r\n\r\n// For Redux Dev Tools\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nexport default function configureStore(preloadedState) {\r\n  return createStore(\r\n    rootReducer,\r\n    preloadedState,\r\n    composeEnhancers(applyMiddleware(...middleware, loggerMiddleware))\r\n  )\r\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport App from './components/App'\nimport configureStore from './store/configureStore'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(\n  <Provider store={configureStore()}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}